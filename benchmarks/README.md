# Performance Gates That Block Regressions

This folder is where Volta stores machine-specific performance baselines.
If runtime speed slips, release gates fail before the regression ships.

## What lives here

- `benchmarks/baselines/<signature>.json`: golden baseline generated by `scripts/perf/perf_gate.py`
- `benchmarks/reports/`: local/CI comparison outputs (markdown/json, not committed)

## Create a baseline (first run)

```bash
python scripts/perf/perf_gate.py --allow-missing-baseline
```

What it does:
- runs `perf_probe`
- detects your CPU signature
- writes the baseline JSON for this machine

## Verify no regression

```bash
python scripts/perf/perf_gate.py --threshold-percent 5
```

Rule:
- if performance regresses above threshold, exit code is non-zero
- CI treats that as a hard failure for release/perf lanes

## Tensor microbench harness

For tensor-level performance baselines (matmul, softmax, unary ops, reductions):

```bash
cargo run --release --bin tensor_bench
```

Current baseline snapshot is tracked in:
- `benchmarks/baselines/tensor-ops-release.txt`
